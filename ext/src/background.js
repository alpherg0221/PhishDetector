import{h as c,L as s,u as i,d as o}from"../assets/utils.js";chrome.runtime.onInstalled.addListener(async()=>{await chrome.tabs.create({url:"./src/startup/index.html"})});chrome.alarms.onAlarm.addListener(e=>{e.name==="checkTmp"&&c(s.Tmp).then(a=>{const r=a.filter(t=>Date.now()-parseInt(t.split("@")[1])<0);i(s.Tmp,r).then()})});chrome.runtime.onMessage.addListener((e,a,r)=>(chrome.tabs.query({active:!0,lastFocusedWindow:!0}).then(([t])=>{switch(e.type){case"detection":return chrome.tabs.sendMessage(t.id,{type:"detection"}).then(n=>r(n)),!0;case"close":return chrome.tabs.remove(t.id).then(),!0;case"list":return chrome.tabs.create({url:`./src/list/index.html?listType=${e.listType}`}).then(),!0}}),!0));chrome.tabs.onRemoved.addListener(e=>{console.log(e),o(s.Tmp,String(e),!0).then()});const m=async()=>{await chrome.alarms.get("checkTmp")===void 0&&await chrome.alarms.create("checkTmp",{periodInMinutes:.5})};m().then();
